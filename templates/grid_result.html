{{define "grid-result"}}
<div class="box">
  <h3 class="title">Grid report</h3>
  <h5 class="subtitle">Here you can see grid analysis results</h5>

  <div class="container">
    <table class="table">
      <tr>
        <th></th>
        {{ range $j, $term := $.Grid.Terms }}
        <td>{{ $term.Title }}</td>
        {{ end }}
        <th></th>
      </tr>
      {{ range $i, $construct := .Grid.Constructs }}
      <tr>
        <th>{{ $construct.LeftPole }}-{{ $construct.RightPole }}</th>
        {{ range $j, $term := $.Grid.Terms }}
        <td>{{ $.Grid.Matrix.At $i $j }}</td>
        {{ end }}
        <th>{{ $construct.LeftPole }}-{{ $construct.RightPole }}</th>
      </tr>
      {{ end }}
      <tr>
        <th></th>
        {{ range $j, $term := $.Grid.Terms }}
        <td>{{ $term.Title }}</td>
        {{ end }}
        <th></th>
      </tr>
    </table>
  </div>

  <div class="container"> <button class="button is-success" live-click="gridResult">Построить графики</button></div>

  <div class="section">
    <div class="columns">
      <div class="column">
        <h3 class="title is-3">Корреляции элементов</h3>
        <div id="terms-corr-heatmap" class="block"></div>
      </div>
      <div class="column">
        <h3 class="title is-3">Корреляции конструктов</h3>
        <div id="constructs-corr-heatmap" class="block"></div>
      </div>
    </div>
  </div>

</div>

</div>

<script live-hook="makeChartsHook" type="application/json" id="chartsData">
  {
    "updateValue": {{ .UpdateValue }},
    "termsCorrHeatmap": {{ .Charts.TermsCorr }},
    "constructsCorrHeatmap": {{ .Charts.ConstructsCorr }},
    "config": {
      "displaylogo": false,
      "displayModeBar": false,
      "responsive": false
    }
  }
</script>

{{ end }}